/*!
 * apiai
 * Copyright(c) 2015 http://api.ai/
 * Apache 2.0 Licensed
 */

'use strict';

var util = require('util');


var TextRequest = require('./text_request').TextRequest;

var LocalStorage = require('node-localstorage').LocalStorage;
var localStorage = new LocalStorage('./storage');

var version = '20150910'
var hostname = 'api.api.ai'
var path = '/v1/query'

function createApplication(clientAccessToken, subscriptionKey) {
    if (!clientAccessToken) {
        throw new Error('\'clientAccessToken\' cannot be empty.');
    }

    if (!subscriptionKey) {
        throw new Error('\'subscriptionKey\' cannot be empty.');
    }

    return new Application(clientAccessToken, subscriptionKey);
}

exports = module.exports = createApplication;

function Application (clientAccessToken, subscriptionKey) {
    var self = this;

    self.language = getUserLang();

    self.clientAccessToken = clientAccessToken;
    self.subscriptionKey = subscriptionKey;

    self.hostname = hostname;
    self.path = path;
    self.version = version;
};

Application.prototype.textRequest = function(query) {
    var self = this;
    var opt = {};

    if (!('version' in opt)) {
        opt.version = self.version
    }
    return new TextRequest(self, query, opt);
};
